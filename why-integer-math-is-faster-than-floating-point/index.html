<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


  <title>Why Integer Math Is So Much Faster Than Floating-Point</title>


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
<link href="https://azad2171.github.io/why-integer-math-is-faster-than-floating-point/" rel="canonical" />
  <!-- Feed -->
  <link href="https://azad2171.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
    title="Between the Brackets Full Atom Feed" />
  <link href="https://azad2171.github.io/feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
    title="Between the Brackets Full RSS Feed" />
  <link href="https://azad2171.github.io/feeds/programming.atom.xml" type="application/atom+xml"
    rel="alternate" title="Between the Brackets Categories Atom Feed" />
  <link href="https://azad2171.github.io/feeds/programming.rss.xml" type="application/rss+xml"
    rel="alternate" title="Between the Brackets Categories RSS Feed" />

  <link rel="stylesheet" type="text/css" href="https://azad2171.github.io/theme/css/style.css">


  <!-- Custom fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,300' rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css" />

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->

  <script>
    var siteUrl = 'https://azad2171.github.io';
  </script>

  <script>
    var localTheme = localStorage.getItem('attila_theme');
    switch (localTheme) {
      case 'dark':
        document.documentElement.classList.add('theme-dark');
        break;
      case 'light':
        document.documentElement.classList.add('theme-light');
        break;
      default:
        break;
    }
  </script>







    <meta name="description" content="Discover why integer operations outperform floating-point math in C++ and how it impacts performance-critical systems like HFT and...">

    <meta name="author" content="Lovekesh Azad">

    <meta name="tags" content="C++">
    <meta name="tags" content="HFT">
    <meta name="tags" content="low latency">
    <meta name="tags" content="performance optimization">
    <meta name="tags" content="floating point">




<!-- Open Graph -->
<meta prefix="og: http://ogp.me/ns#" property="og:site_name" content="Between the Brackets"/>
<meta prefix="og: http://ogp.me/ns#" property="og:title" content="Why Integer Math Is So Much Faster Than Floating-Point"/>
<meta prefix="og: http://ogp.me/ns#" property="og:description" content="Discover why integer operations outperform floating-point math in C++ and how it impacts performance-critical systems like HFT and..."/>
<meta prefix="og: http://ogp.me/ns#" property="og:locale" content="en_US"/>
<meta prefix="og: http://ogp.me/ns#" property="og:url" content="https://azad2171.github.io/why-integer-math-is-faster-than-floating-point/"/>
<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article"/>
<meta prefix="og: http://ogp.me/ns#" property="article:published_time" content="2025-07-18 22:00:00+05:30"/>
<meta prefix="og: http://ogp.me/ns#" property="article:modified_time" content=""/>
<meta prefix="og: http://ogp.me/ns#" property="article:author" content="https://azad2171.github.io/author/lovekesh-azad.html">
<meta prefix="og: http://ogp.me/ns#" property="article:section" content="Programming"/>
<meta prefix="og: http://ogp.me/ns#" property="article:tag" content="C++"/>
<meta prefix="og: http://ogp.me/ns#" property="article:tag" content="HFT"/>
<meta prefix="og: http://ogp.me/ns#" property="article:tag" content="low latency"/>
<meta prefix="og: http://ogp.me/ns#" property="article:tag" content="performance optimization"/>
<meta prefix="og: http://ogp.me/ns#" property="article:tag" content="floating point"/>
<meta prefix="og: http://ogp.me/ns#" property="og:image" content="https://azad2171.github.io/theme/images/home-bg.jpg">

<!-- Twitter Card -->

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Why Integer Math Is So Much Faster Than Floating-Point",
  "headline": "Why Integer Math Is So Much Faster Than Floating-Point",
  "datePublished": "2025-07-18 22:00:00+05:30",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "Lovekesh Azad",
    "url": "https://azad2171.github.io/author/lovekesh-azad.html"
  },
  "image": "https://azad2171.github.io/theme/images/post-bg.jpg",
  "url": "https://azad2171.github.io/why-integer-math-is-faster-than-floating-point/",
  "description": "Discover why integer operations outperform floating-point math in C++ and how it impacts performance-critical systems like HFT and..."
}
</script>
</head>









<body class="category-template">

<div class="nav-header">
  <nav class="nav-wrapper" aria-label="Main">
<ul>

    <li class="nav-Home " role="presentation"><a href="/"><span>Home</span></a></li>
    <li class="nav-About the Author " role="presentation"><a href="/author/lovekesh-azad.html"><span>About the Author</span></a></li>

</ul>
<ul class="nav-meta">
  <li class="nav-search" style="display: none;">
    <a title="Search">
      <i class="icon icon-search" aria-hidden="true"></i>
      <span>Search</span>
    </a>
  </li>
</ul>  </nav>

  <div class="nav-wrapper-control">
    <div class="inner">
      <a class="nav-menu" role="button"><i class="icon icon-menu" aria-hidden="true"></i>Menu</a>
      <a class="nav-search" title="Search" role="button" style="display: none;"><i class="icon icon-search" aria-hidden="true"></i></a>
    </div>
  </div>
</div>
<div class="nav-close" role="button" aria-label="Close"></div>
  <section id="wrapper" class="page-wrapper">
    <!-- Progressbar -->
    <div class="progress-container">
      <span class="progress-bar"></span>
    </div>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header class="post-header ">
      <div class="inner">
        <span class="post-info">
          <span class="post-type">Article</span>
          <span class="post-count">Programming</span>
        </span>
        <h1 class="post-title">Why Integer Math Is So Much Faster Than Floating-Point</h1>
        <div class="post-meta">
          <div class="post-meta-avatars">


            <figure class="post-meta-avatar avatar">
              <a class="author-avatar" href="https://azad2171.github.io/author/lovekesh-azad.html">
                <img class="author-profile-image" src="https://azad2171.github.io/authors/avatar.png" alt="Lovekesh Azad" />
              </a>
            </figure>
          </div>

          <h4 class="post-meta-author">
            Lovekesh Azad
          </h4>
          <time datetime="Fri 18 July 2025">Fri 18 July 2025</time>
        </div>
      </div>
    </header>

    <!-- Post content -->
    <main class="content" role="main">
        <article class="post">
        <div class="inner">
          <section class="post-content">
            <p>In the world of high-performance computing, and especially in high, frequency trading (HFT) - nanoseconds matter. As a developer learning C++, understanding why some operations are faster than others isn‚Äôt just an academic curiosity. It‚Äôs the beginning of writing better, faster, and more predictable code.</p>
<p>In this chapter, we‚Äôll answer a seemingly simple question:</p>
<h2>Why is integer math faster than floating-point math?</h2>
<p>The answer lies deeper than just ‚Äúthe compiler does a better job.‚Äù To really understand it, we have to go all the way down to the CPU‚Äôs architecture.</p>
<h2>The Experiment</h2>
<p>Let‚Äôs consider two versions of the same loop. Both run one billion times. One adds 1.0 to a floating-point variable (<code>double</code>), and the other adds 1 to an integer (<code>int64_t</code>).</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Floating-point loop</span>
<span class="k">volatile</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">sink</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">long</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1&#39;000&#39;000&#39;000</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">sink</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1">// Integer loop</span>
<span class="k">volatile</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">sink</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">long</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1&#39;000&#39;000&#39;000</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">sink</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p>When compiled in Release mode and timed, I got:</p>
<ul>
<li><strong>Floating-point</strong>: ~2.8 seconds (2,800,000,000 ns)</li>
<li><strong>Integer</strong>: ~0.45 seconds (450,000,000 ns)</li>
</ul>
<p>That‚Äôs a 6x performance difference.</p>
<h3>What‚Äôs going on?</h3>
<h2>The CPU is an Assembly Line</h2>
<p>Modern CPUs are built around a concept called <em>pipelining</em>.</p>
<p>Imagine a factory assembly line: instead of waiting for one item to be built from start to finish, you build many items in stages, passing each piece down the line. Every stage works in parallel, increasing throughput.</p>
<p>Instructions in a CPU work the same way. When you write something like <code>sink += 1</code>, the CPU breaks it down into micro-operations and sends them through its instruction pipeline.</p>
<p>But - and this is key - some instructions are simpler and faster to move through that pipeline than others.</p>
<h2>Integer Math Is the Fast Path</h2>
<p>Integer addition is about as simple as it gets in CPU terms. It involves:</p>
<ul>
<li>One ALU (Arithmetic Logic Unit) instruction</li>
<li>One register read</li>
<li>One register write</li>
</ul>
<p>Modern CPUs have multiple ALUs, and each can do integer math in a single clock cycle. The CPU can queue them up, execute them in parallel, and keep its pipelines full.</p>
<blockquote>
<p>üí° <strong>Result</strong>: Integer math is fast, parallelizable, and compiler-friendly.</p>
</blockquote>
<h2>Floating-Point Is the Slow Path</h2>
<p>Floating-point math, even simple additions, is much more complex:</p>
<ul>
<li>The numbers are represented in IEEE 754 format (sign, exponent, mantissa)</li>
<li>The CPU must align the exponents, add the mantissas, then normalize and round the result</li>
<li>It also must handle edge cases: NaN, ¬±infinity, denormals, overflows, underflows</li>
</ul>
<p>This work is done in a dedicated unit called the <strong>FPU</strong> (Floating Point Unit). Most CPUs have fewer FPUs than integer units. These units are slower and more specialized - they don‚Äôt benefit from the same level of pipelining and parallelism as integer units.</p>
<blockquote>
<p>üí° <strong>Result</strong>: Floating-point math is powerful, but it‚Äôs slower and harder to optimize.</p>
</blockquote>
<h2>Why This Matters (Especially in HFT)</h2>
<p>In Python, you don‚Äôt think about this. Whether you write <code>x += 1</code> or <code>x += 1.0</code>, the interpreter figures it out. Performance differences are hidden under multiple abstraction layers.</p>
<p>But in C++, you‚Äôre much closer to the metal.</p>
<p>If you‚Äôre writing tight loops that run on every market tick, or latency-sensitive order book code, knowing that floating-point math can cost you 5-10x more CPU time is not optional - it‚Äôs essential.</p>
<h2>Why Compilers Favor Integers</h2>
<p>The CPU is part of the story - but the compiler plays a major role too.</p>
<p>Compilers optimize integer code more aggressively because:</p>
<ul>
<li>Integer math has predictable, exact behavior  </li>
<li>It's free from rounding or precision concerns  </li>
<li>Loop analysis is easier, enabling loop unrolling, vectorization, and instruction reordering  </li>
<li>There‚Äôs less risk of introducing undefined or edge-case behavior  </li>
</ul>
<p>Floating-point math introduces complexity that often prevents the compiler from applying aggressive optimizations.</p>
<h3>So here‚Äôs the rule:</h3>
<hr>
<blockquote>
<p>If you can use integers, use them.</p>
</blockquote>
<p>Reserve floating-point only when you need:</p>
<ul>
<li>Decimal precision (e.g., P&amp;L calcs, percentages)</li>
<li>Complex math (e.g., square roots, trigonometry)</li>
</ul>
<p>For loop counters, indices, IDs, timestamps, or state - stick to integers.</p>
<h2>What You Just Learned</h2>
<p>By running two simple loops, you‚Äôve learned:</p>
<ul>
<li>The CPU treats integer and floating-point instructions very differently  </li>
<li>Integer math is simpler, faster, and more parallel  </li>
<li>Floating-point math is complex, slow, and harder to optimize  </li>
<li>Compiler optimizations depend heavily on instruction type  </li>
<li>Even one line of code (<code>sink += 1.0</code> vs <code>sink += 1</code>) can make a 6x difference  </li>
</ul>
<p>And most importantly:</p>
<blockquote>
<p><strong>Performance in C++ is not magic. It‚Äôs mechanics.</strong></p>
</blockquote>
<p>The more you understand the hardware, the more power you have as a developer.</p>
<h2>The Takeaway</h2>
<p>If you're coming from Python or high-level programming, it's easy to overlook what your code turns into once compiled. But in C++, especially in latency-sensitive applications like HFT, you can't afford to ignore how your instructions translate into silicon.</p>
<p><strong>So here‚Äôs the golden rule:</strong></p>
<blockquote>
<p><strong>If you can use integers, use them.</strong></p>
</blockquote>
<p>Use floating-point types only when you truly need them - and know that they come at a cost.</p>
<h2>Final Thoughts</h2>
<p>Understanding performance in C++ isn‚Äôt just about writing faster code - it‚Äôs about thinking in layers:<br>
<strong>language ‚Üí compiler ‚Üí CPU</strong></p>
<p>By learning how a simple loop behaves differently with integers vs. floating points, you're not just optimizing - you're building intuition about how machines actually work.</p>
<blockquote>
<p>‚ÄúTo understand the code, read the code.<br>
To understand the performance, read the assembly.‚Äù<br>
‚Äî Unknown systems engineer, probably sleep-deprived</p>
</blockquote>
<hr>
<p><strong>Until next time, may your loops be tight and your pipelines full.</strong></p>
<p>If you‚Äôre new to low-level benchmarking, you might also like <a href="from-python-to-nanoseconds-understanding-c-build-modes-through-a-simple-timing-benchmark.html">this article on build modes</a>.</p>
          </section>


          <section class="post-footer" >
            <div class="post-share">
              <span class="post-info-label">Share</span>
              <a title="Twitter" aria-label="Twitter" class="twitter" href="https://twitter.com/share?text=Why Integer Math Is So Much Faster Than Floating-Point&amp;url=https://azad2171.github.io/why-integer-math-is-faster-than-floating-point/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="icon icon-twitter" aria-hidden="true"></i><span class="hidden">Twitter</span>
              </a>
              <a title="Facebook" aria-label="Facebook" class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://azad2171.github.io/why-integer-math-is-faster-than-floating-point/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                <i class="icon icon-facebook" aria-hidden="true"></i><span class="hidden">Facebook</span>
              </a>
              <a title="LinkedIn" aria-label="LinkedIn" class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://azad2171.github.io/why-integer-math-is-faster-than-floating-point/&amp;title=Why Integer Math Is So Much Faster Than Floating-Point" onclick="window.open(this.href, 'linkedin-share', 'width=930,height=720');return false;">
                <i class="icon icon-linkedin" aria-hidden="true"></i><span class="hidden">LinkedIn</span>
              </a>
              <a title="Email" aria-label="Email" class="email" href="mailto:?subject=Why Integer Math Is So Much Faster Than Floating-Point&amp;body=https://azad2171.github.io/why-integer-math-is-faster-than-floating-point/">
                <i class="icon icon-mail" aria-hidden="true"></i><span class="hidden">Email</span>
              </a>
              <div class="clear"></div>
            </div>

            <aside class="post-tags">
<a href="https://azad2171.github.io/tag/c.html">C++</a><a href="https://azad2171.github.io/tag/hft.html">HFT</a><a href="https://azad2171.github.io/tag/low-latency.html">low latency</a><a href="https://azad2171.github.io/tag/performance-optimization.html">performance optimization</a><a href="https://azad2171.github.io/tag/floating-point.html">floating point</a>            </aside>

            <div class="clear"></div>


          </section>


          <aside class="post-nav">
            <a class="post-nav-next" href="https://azad2171.github.io/why-your-c-loop-might-not-run-volatile-compiler-optimizations/">
              <section class="post-nav-teaser">
                <i class="icon icon-arrow-left"></i>
                  <h2 class="post-nav-title">Why Your C++ Loop Might Not Run: Volatile & Compiler Optimizations</h2>
                <p class="post-nav-excerpt">Learn how the volatile keyword and compiler optimizations affect control flow in...</p>
                <p class="post-nav-meta"><time datetime="Sun 20 July 2025">Sun 20 July 2025</time></p>
              </section>
            </a>
            <a class="post-nav-prev" href="https://azad2171.github.io/from-python-to-nanoseconds/">
              <section class="post-nav-teaser">
                <i class="icon icon-arrow-right"></i>
                  <h2 class="post-nav-title">From Python to Nanoseconds: C++ Build Modes Explained</h2>
                <p class="post-nav-excerpt">A practical guide comparing Python and C++ timing, and how C++ build modes impact performance.</p>
                <p class="post-nav-meta"><time datetime="Thu 17 July 2025">Thu 17 July 2025</time></p>
              </section>
            </a>
            <div class="clear"></div>
          </aside>

        </div>
      </article>
    </main>
    <div class="nav-footer">
      <nav class="nav-wrapper" aria-label="Footer">
        <span class="nav-copy">Between the Brackets &copy; 2025
        </span>
        <span class="nav-credits">



          Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a> &bull; Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a> &bull;
          <a class="menu-item js-theme" href="#" data-system="System theme" data-dark="Dark theme" data-light="Light theme">
            <span class="theme-icon"></span><span class="theme-text">System theme</span>
          </a>
        </span>
      </nav>
    </div>

  </section>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
  <script type="text/javascript" src="https://azad2171.github.io/theme/js/jquery.fitvids.js"></script>
  <script type="text/javascript" src="https://azad2171.github.io/theme/js/script.js"></script>

    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7Y574CSESH"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-7Y574CSESH', { 'anonymize_ip': true });
    </script>

  <!-- 	The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in article.html, but it needs to be included down here, after jQuery has already loaded. -->

<!-- Add MathJax and FontAwesome for Asciidoc -->\
<script>
  $(document).ready(function () {
    var viewport = $(window);
    var post = $('.post-content');
    // Responsive videos with fitVids
    post.fitVids();

    var mdSelector=".highlight pre";
    var rstSelector=".highlight pre";
    // For ":source-highlighter: highlight.js`" in asciidoc
    var adocSelector="pre.highlight > code[data-lang]"
    var selector=mdSelector;
    // Format code blocks and add line numbers
    function codestyling() {
      $(selector).each(function(i, e) {
        // Code highlight
        hljs.highlightElement(e);
        // No lines for plain text blocks
        if (!$(this).hasClass('language-text')) {
          var code = $(this);
          // Calculate amount of lines
          var lines = code.html().split(/\n(?!$)/g).length;
          var numbers = [];
          if (lines > 1) {
            lines++;
          }
          for (i = 1; i < lines; i++) {
            numbers += '<span class="line" aria-hidden="true">' + i + '</span>';
          }
          code.parent().append('<div class="lines">' + numbers + '</div>');
        }
      });
    }

    // Format code blocks only
    function codestylingWithoutLineNumbers() {
      $(selector).each(function(i, e) {
        // Code highlight
        hljs.highlightElement(e);
      });
    }

    codestylingWithoutLineNumbers();
    // Reading progress bar on window top
    function readingProgress() {
      var postBottom = post.offset().top + post.height();
      var viewportHeight = viewport.height();
      var progress = 100 - (((postBottom - (viewport.scrollTop() + viewportHeight) + viewportHeight / 3) / (postBottom - viewportHeight + viewportHeight / 3)) * 100);
      $('.progress-bar').css('width', progress + '%');
      (progress > 100) ? $('.progress-container').addClass('complete'): $('.progress-container').removeClass('complete');
    }
    readingProgress();
    // Trigger reading progress
    viewport.on({
      'scroll': function() {
        readingProgress();
      },
      'resize': function() {
        readingProgress();
      },
      'orientationchange': function() {
        readingProgress();
      }
    });

  });
</script>
</body>

</html>